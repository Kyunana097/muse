C51 COMPILER V9.60.0.0   NOTE                                                              04/24/2025 22:21:35 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE NOTE
OBJECT MODULE PLACED IN .\Objects\note.obj
COMPILER INVOKED BY: D:\keil5\C51\BIN\C51.EXE sources\note.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\Headers;.\sources) DEBUG 
                    -OBJECTEXTEND PRINT(.\Listings\note.lst) TABS(2) OBJECT(.\Objects\note.obj)

line level    source

   1          #include "Headers/oledfont.h"
   2          #include "Headers/note.h"
   3          #include <REGX52.H>
   4          #include "Headers/oled.h"
   5          
   6          
   7          typedef struct NoteNode {
   8            unsigned char x;      // 当前X坐标
   9            unsigned char y;      // Y坐标(轨道)
  10            unsigned char speed;  // 移动速度
  11            struct NoteNode* next; // 指向下一个音符节点
  12          } NoteNode;
  13          
  14          NoteNode* CreateNoteNode(unsigned char track, unsigned char speed) {
  15   1          NoteNode* newNote = (NoteNode*)malloc(sizeof(NoteNode));
*** WARNING C206 IN LINE 15 OF sources\note.c: 'malloc': missing function-prototype
*** ERROR C267 IN LINE 15 OF sources\note.c: 'malloc': requires ANSI-style prototype
  16   1          if (newNote == NULL) {
*** ERROR C202 IN LINE 16 OF sources\note.c: 'NULL': undefined identifier
  17   2              // 内存不足处理
  18   2              return NULL;
*** ERROR C202 IN LINE 18 OF sources\note.c: 'NULL': undefined identifier
  19   2          }
  20   1      
  21   1          newNote->x = 119;  // 从右侧开始
  22   1          newNote->y = track * 3 ;  // 轨道1=1, 轨道2=4
  23   1          newNote->speed = speed;
  24   1          newNote->next = NULL;
*** ERROR C202 IN LINE 24 OF sources\note.c: 'NULL': undefined identifier
  25   1          return newNote;
  26   1      }
  27          
  28          void AddNoteToHead(NoteNode** head, NoteNode* newNote) {
  29   1          if (newNote == NULL) return;
*** ERROR C202 IN LINE 29 OF sources\note.c: 'NULL': undefined identifier
  30   1      
  31   1          newNote->next = *head;
  32   1          *head = newNote;
  33   1      }
  34          
  35          void RemoveNote(NoteNode** head, NoteNode* noteToRemove) {
  36   1          if (*head == NULL || noteToRemove == NULL) return;
*** ERROR C202 IN LINE 36 OF sources\note.c: 'NULL': undefined identifier
  37   1      
  38   1          // 如果要删除的是头节点
  39   1          if (*head == noteToRemove) {
  40   2              *head = noteToRemove->next;
  41   2              free(noteToRemove);
  42   2              return;
  43   2          }
  44   1      
  45   1          // 查找要删除的节点
  46   1          NoteNode* current = *head;
  47   1          while (current->next != NULL && current->next != noteToRemove) {
C51 COMPILER V9.60.0.0   NOTE                                                              04/24/2025 22:21:35 PAGE 2   

  48   2              current = current->next;
  49   2          }
  50   1      
  51   1          // 如果找到节点，删除它
  52   1          if (current->next == noteToRemove) {
  53   2              current->next = noteToRemove->next;
  54   2              free(noteToRemove);
  55   2          }
  56   1      }

C51 COMPILATION COMPLETE.  1 WARNING(S),  6 ERROR(S)
